
@{
    ViewBag.Title = "Index";
}


<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <td>
                    <h4 class="biru">Biodata<button type="button" class="btn btn-link" id="idBtnEditBiodata"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button></h4>
                </td>
            </tr>
        </thead>
        <tbody id="idTblBodyBiodata"></tbody>
    </table>
</div>

<div class="modal fade" id="idMdlEditBiodata" tabindex="-1" role="dialog">
    <div class="modal-dialog" style="width:850px;" role="document">
        <div class="modal-content">
            <div class="modal-header birubg">
                @*<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>*@
                <h4 class="modal-title">Ubah Biodata</h4>
            </div>
            <div class="modal-body" id="idBodyEditBiodata">
                @*<p>One fine body&hellip;</p>*@
            </div>
            @*<div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>*@
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<script>
    var vDataID = 1;
    var vDataFamilyTreeType =
          { 1: 'Parents', 2: 'Children' };
    var vDataFamilyRelation =
          { 1: 'Father', 2: 'Mother', 3: 'Brother/Sister' };
    var vDataGender =
          { false: 'Perempuan', true: 'Laki-laki' };
    var vDataEducationLevel =
          { 1: 'SD', 2: 'SLTP', 3: 'SLTA', 4: 'Sarjana' };
    var vDataBulan =
          { Jan: 'Januari', Feb: 'Februari', Mar: 'Maret', Apr: 'April', May: 'Mei', Jun: 'Juni', Jul: 'Juli', Aug: 'Agustus', Sep: 'September', Oct: 'Oktober', Nov: 'November', Dec: 'Desember' };
    var vDataReligion =
          { 1: 'Islam', 2: 'Kristen', 3: 'Protestan', 4: 'Hindu', 5: 'Buddha', 6: 'Konghuchu' };
    var vDataIdentityType =
        { 1: 'KTP',2:'SIM' };
    var vDataMaritalStatus =
        { 1: 'Menikah', 2: 'Single' };


    $(document).ready(function () {

        var vStrHtml = '';
        $.ajax({
            url: '/Biodata/AmbilData',
            data: {ID:vDataID},
            method: 'Get',
            success: function (d) {
                debugger;
                    
                    vConvert = new Date(d.dob.substr(6, 12) - 0).toString();
                    var bulan = (vConvert.toString()).substr(4, 3);
                    var tanggal = (vConvert.toString()).substr(8, 2);
                    var tahun = (vConvert.toString()).substr(11, 4);
                    var vDataDob = tanggal + ' ' + vDataBulan[bulan] + ' ' + tahun;

                    vStrHtml = vStrHtml +
                            '<tr class="birutext">' +
                            '<td>Nama Lengkap</td>' +
                            '<td>:</td>' +
                            '<td input>' + d.fullname + '</td>' +
                            '</tr>' +
                            '<tr class="birutext">' +
                            '<td>Nama Panggilan</td>' +
                            '<td>:</td>' +
                            '<td input>' + d.nick_name + '</td>' +
                            '</tr>' +
                            '<tr class="birutext">' +
                            '<td>Kontak</td>' +
                            '<td>:</td>' +
                            '<td input>' + d.email + ' / ' + d.phone_number1 + '</td>' +
                            '</tr>' +
                            '<tr class="birutext">' +
                            '<td>Tempat, Tgl. Lahir</td>' +
                            '<td>:</td>' +
                            '<td input>' + d.pob + ', ' + vDataDob + '</td>' +
                            '</tr>' +
                            '<tr class="birutext">' +
                            '<td>Jenis Kelamin, Tinggi (cm), Berat (kg)</td>' +
                            '<td>:</td>' +
                            '<td input>' + vDataGender[d.gender] + ', ' + d.high + ', ' + d.weight + '</td>' +
                            '</tr>' +
                            '<tr class="birutext">' +
                            '<td>Agama</td>' +
                            '<td>:</td>' +
                            '<td input>' + vDataReligion[d.religion_id] + '</td>' +
                            '</tr>'+
                            '<tr class="birutext">' +
                            '<td>Kewarganegaraan, Suku Bangsa</td>' +
                            '<td>:</td>' +
                            '<td input>' + d.nationality + ', ' + d.ethnic + '</td>' +
                            '</tr>'+
                            '<tr class="birutext">' +
                            '<td>Kegemaran / Hobi</td>' +
                            '<td>:</td>' +
                            '<td input>' + d.hobby + '</td>' +
                            '</tr>'+
                             '<tr class="birutext">' +
                            '<td>Jenis & Nomor Identitas</td>' +
                            '<td>:</td>' +
                            '<td input>' + vDataIdentityType[d.identity_type_id] + ', ' + d.identity_no + '</td>' +
                            '</tr>'+
                            '<tr class="birutext">' +
                            '<td>Status & Tahun Pernikahan</td>' +
                            '<td>:</td>' +
                            '<td input>' + vDataMaritalStatus[d.marital_status_id] + ' - ' + d.mariage_year + '</td>' +
                            '</tr>';

                $('#idTblBodyBiodata').append(vStrHtml);
            }
        });

        $('#idBtnEditBiodata').click(function () {
            $.ajax({
                url: '/Biodata/Edit',
                data: { ID: vDataID },
                method: 'Post',
                success: function (mdl) {
                    $('#idBodyEditBiodata').empty();
                    $('#idBodyEditBiodata').append(mdl);
                    $('#idget').val(vDataID); //memasukan nilai vDataID ke dalam idget pada partial view _Edit
                    $('#idMdlEditBiodata').modal('show');
                    debugger;
                },
                error: function (mdl) {
                    debugger;
                }
            });

        });
   

    });
</script>